importScripts("libs/underscore-min.js","spoooky.min.js"),self.addEventListener("message",function(e){var a,t=e.data;switch(t.command){case"monte carlo tree search with uct":self.postMessage({type:"Starting Monte Carlo Tree Search With UCT"});var s=new Spoooky.Game,o=s.clone(t.gameModel),n=Spoooky.AI.UCT(o,t.agentFocus,t.maxSteps,t.maxTime,t.learn,t.uctConstant,t.generateMctsGraph);self.postMessage({type:"decision",agentID:t.agentID,agentRole:t.agentRole,agentFocus:t.agentFocus,results:n.results,simCount:n.simCount,uctConstant:t.uctConstant,simSteps:n.simSteps,mctsGraph:n.mctsGraph,QLearner:JSON.stringify(n.QLearner)}),self.close();break;case"alpha beta negamax":self.postMessage({type:"Starting Alpha Beta NegaMax Search"});var s=new Spoooky.Game;a=Spoooky.AI.abNegaMax(s.clone(t.gameModel),t.maxDepth,0,-1*Number.MAX_VALUE,Number.MAX_VALUE,t.agentFocus),self.postMessage({type:"decision",agentID:t.agentID,agentRole:t.agentRole,agentFocus:t.agentFocus,results:[{score:a.score,moveIndex:a.move.moveIndex,target:a.move.targetX+1+"-"+(a.move.targetY+1)}]}),self.close();break;default:self.postMessage("Unknown command: "+t.command)}},!1);